...menustart


...menuend


- 万物皆对象
- python中整数 也是对象
- 实现上，pyhton对象都包含一个 16字节长度的头结构
 
- 名字空间
- 和 C 变量名是内存地址别名不同 , Python 的名字实际上是1个字符串对象
- 正是因为 名字的弱类型特征， 我们可以在运行期随时将其关联到任何类型对象
- 代码 block 不知 名字空间 ！！！ 这点和c不同

- python 函数 可以重载吗？
    - 不能。 因为 在名字空间内， 名字是唯一的主键。 在重载这一点上,函数参数并不能派上什么忙.



- 引用传递
- 对象总是按引用传递。 Python 没有值类型和引用类型一说，就算是最简单的整数也是拥有标准头的完整对象。


 2 基本类型


- 整数是虚拟机 特殊照顾对象
    - small_ints : 对于小整数，Python使用小整数对象池small_ints (固定数组) 缓存了[-5，257）之间的整数，该范围内的整数在Python系统中是共享的。
    - 对于超出了范围的其他整数，Python同样提供了专门的缓冲池 PyIntBlock
- 因 PyIntBlock 内存只复用不释放，同时持有大量整数对象将导致内存暴涨，且不会在这些对象被回收后释放内存，造成事实上的内存泄露
用range 创建一个巨大的数字列表，这就需要足够多的 PyIntBlock 为数字对象提供存储空间
xrange 则不会，每次迭代后，数字对象被回收，其占用的内存空闲出来并被复用，内存也就不会暴涨了。
- 实际上，python支持任意精度的整数... 


- 字符串

- 类似的，对于其他 像字符串，tuple元组之类的对象 ，python 也有 缓冲池机制


 join vs '+'
join 计算总长度后，⼀次性分配存储内存


list 

- 实现上是 数组
- append / pop : O(1)
- insert / remove : O(n)

- code

- 当编译器遇到 def，会生成创建函数对象指令
- 也就是说 def 是执行指令， 不仅仅是个语法关键字
- 默认参数的陷阱

 >>> def test(x, ints = []):
...     ints.append(x)
...     return ints


- 默认值对象在创建函数时生成
- 如果该默认值是 可变类型，那么就如同 c 局部静态变量

- 名字作用域
    - 除非使用 global、nonlocal(python3) 特别声明, 否则在函数内部使 赋值语句，总是在 locals 名字空间中 新建一个对象关联。
    - 如果仅仅是引用外部变量，那么按 LEGB 顺序在不同作用域查找该名字
        - 字查找顺序: locals -> enclosing function -> globals -> builtins
    - 注意 是在 编译时 确定的 , 而且编译期作用域不受执行期条件影响




----

 defaultdict
 OrderedDict

