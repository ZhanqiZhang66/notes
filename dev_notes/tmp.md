


一个常用的做法，是使用计数器, 并设置一个阈值，比如25。 玩家抽卡一次，计数器累加1， 如果玩家抽中了稀有卡，计数器清零。 当计数器累加到阈值的时候，也就是玩家已经连续25次抽卡都没有抽中的时候，按抽中处理，  同时计数器清零。

使用这个方式 看一下时间间隔




这种实现好处就是简单。但是，这个方案仅仅是改善了 玩家抽很多次抽不到的体验，并且，总体上说，这种做法其实是增加了这张稀有卡的掉率。玩家确实高兴le，老板是不是高兴就不知道了。


计数器还有一个变种，改成慢慢地提高掉落的概率。比如大菠萝3 就是使用的这种方式。 他会记录你杀怪的时间，如果长时间没有掉落 Legendary 传奇装备，就会逐渐地提高 传奇装备的掉落概率。

y = e^(x-25)



















十、注意点

需要保证每次随机的数字都相同，所以需要自己实现一套随机数，不能用unity自带的那个随机数接口，而且需要服务端发送相同的随机种子；因为非常微小的误差就有可能产生蝴蝶效应，所以所有float型的参数必须变成int型，保证计算结果一致。



浮点精度的问题在PC上就有跨平台的问题，因为语言编译器不同使用的寄存器和运算过程中的舍入方式不同。就会导致在不同平台下相同的float运算会出现不同的结果，这方面有很多文章阐述就不多做阐述。而在手机上IOS还好比较单纯，Android设备系统硬件千差万别就更容易出现精度问题了。

定点数 + 辅以三角函数查表

大菠萝3   tracks the amount of time you spend fighting creatures without finding a legendary and after a certain perion of time will slowling start increasing the legendary drop rate.


```python
>>> a = [2,1]
>>> b = [1,2]
>>> np.cross(a,b)
array(3)
>>> a = [2,1,0]
>>> b = [1,2,0]
>>> np.cross(a,b)
array([0, 0, 3])
>>>
```




